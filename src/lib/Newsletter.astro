---
import { RightArrow } from "./Icons"

let { id = "bd-form" } = Astro.props
---

<form
  action="https://buttondown.com/api/emails/embed-subscribe/austincrim"
  method="post"
  target="popupwindow"
  onsubmit="window.open('https://buttondown.com/austincrim', 'popupwindow')"
  class="embeddable-buttondown-form rounded-md flex flex-col gap-2"
>
  <label class="font-merriweather dark:text-zinc-200/80 text-sm" for={id}>
    Keep up with my work
  </label>

  <div class="flex items-center">
    <input
      type="email"
      name="email"
      placeholder="Your email"
      autocomplete="email"
      required
      id={id}
      class="bg-slate-50 h-10 border-r border-slate-300 dark:border-slate-700 not-focus-visible:hover:bg-slate-100 w-full p-2 dark:bg-slate-800 transition-colors not-focus-visible:dark:hover:bg-slate-700 rounded-l-md focus-visible:z-10 focus:outline-none"
    />
    <div class="relative h-10 group">
      <button
        tabindex="-1"
        class="absolute pointer-events-none px-2 py-1 [clip-path:inset(0_0_0_0)] transition-[clip-path,color] duration-150 group-hover:[clip-path:inset(0_0_100%_0)] focus-visible:[clip-path:inset(0_0_100%_0)] inset-0 border-l-0 border border-slate-50 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 rounded-r-md"
      >
        <span set:html={RightArrow()} />
      </button>
      <button
        type="submit"
        value="Subscribe"
        class="text-slate-600 focus-visible:ring-primary h-10 px-2 py-1 group-hover:text-slate-50/90 hero-gradient dark:bg-slate-800 bg-slate-50 hover:bg-slate-100 rounded-r-md"
      >
        <span set:html={RightArrow()} />
      </button>
    </div>
  </div>
</form>
